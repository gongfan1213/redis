以下是关于AOP常见使用场景的详细总结：


### 一、日志场景
日志场景是AOP的核心应用场景之一，主要用于增强日志信息的丰富性和可追踪性，减少代码侵入性。  
1. **MDC（映射诊断上下文）**  
   - **定义**：MDC（Mapped Diagnostic Context）是Logback、Log4j、SLF4J等日志框架提供的功能，本质是一个线程安全的Map，通过静态方法提供操作接口。  
   - **作用**：临时存储上下文信息（如版本号、认证标识等辅助信息），这些信息与核心业务无关，但能丰富日志内容，方便问题排查。例如，打印日志时需要携带动态变化的版本号，可通过MDC临时存储，避免硬编码到业务代码中。  
   - **特性**：线程安全，数据仅在当前线程上下文有效，适合多线程环境下的日志追踪。  

2. **辅助信息记录**  
   - 包括方法执行时间统计（通过在方法执行前后记录时间戳，计算时间差）、方法调用次数等。AOP可统一拦截方法，自动完成这些记录，无需在每个方法中重复编写代码。  


### 二、统计场景
AOP可用于各类数据统计场景，通过统一拦截实现无侵入式的计数、抽样等操作。  
- **常见统计类型**：  
  - 方法调用次数、异常执行次数；  
  - 数据抽样（如随机抽取部分请求数据进行分析）；  
  - 数字叠加（如累计某类操作的总次数）。  
- **典型案例**：安全限流场景中，通过AOP拦截请求并计数，控制并发请求量（如限制1000个并发请求），避免在业务代码中嵌入计数逻辑，减少侵入性。  


### 三、安防（安全与防控）场景
AOP在系统安全、风险控制等领域应用广泛，通过拦截实现对方法的动态管控。  
1. **熔断与限流降级**  
   - 熔断框架（如Resilience4j、Hystrix）利用AOP拦截方法，实现限时（超时控制）、限量（并发数控制）等熔断逻辑；  
   - 阿里巴巴Sentinel通过AOP实现限流（控制请求频率）和降级（大促时优先保障多数用户服务，牺牲部分请求）。  

2. **认证与授权**  
   - 典型框架如Spring Security，其方法级别的权限控制大量依赖AOP拦截：通过拦截目标方法，校验当前用户的权限，决定是否允许执行。  

3. **监控**  
   - JMX（Java Management Extensions）通过AOP代理对象实现对方法的监控，收集执行状态、性能数据等；  
   - 可通过AOP拦截记录方法的CPU消耗、内存占用等，辅助性能分析。  


### 四、性能场景
AOP通过统一处理性能优化相关逻辑，提升系统效率。  
1. **缓存**  
   - 典型如Spring Cache，通过AOP拦截方法调用，在方法执行前检查缓存，若存在数据则直接返回，避免重复计算；执行后更新缓存，减少数据库访问。  

2. **超时控制**  
   - 通过AOP拦截方法，设置超时阈值，若方法执行超时则强制中断，避免资源长期占用。  

3. **性能评估**  
   - 拦截方法并记录执行时间、调用频率等，结合抽样和平均值计算，分析性能瓶颈；部分实现通过字节码植入（如Java Agent）收集数据，减少对业务代码的影响。  


### 总结
AOP的核心价值在于**无侵入式地增强代码功能**，通过统一拦截目标方法，实现日志、统计、安防、性能优化等场景的逻辑复用，减少重复代码，提升系统可维护性。上述场景中，AOP均通过“分离业务逻辑与横切逻辑”，让开发者更专注于核心业务实现。
